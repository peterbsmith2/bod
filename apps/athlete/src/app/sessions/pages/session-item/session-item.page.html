<ng-container *ngIf="(sessionItemsLoaded$ | async); else loadingSessionItems">
  <ng-container *ngrxLet="sessionItem$ as sessionItem">
    <mat-card>
      <mat-card-header
        >{{ sessionItem.id }}, tempo: {{ sessionItem.tempo
        }}</mat-card-header
      >
      <mat-card-content>
        <form [formGroup]="form" *ngIf="form">
          <main formArrayName="sets">
            <section *ngFor="let set of arrayOfCount(sessionItem.sets); let i = index;">
              <div [formGroupName]= "i">
                <!-- Set #? -->
                <label>
                  Set {{ i + 1 }}.
                </label>
                <!-- Reps? -->
                <label>
                  Reps
                  <input min="0" type="number" formControlName="reps" [value]="sessionItem.reps">
                  <button (click)="onChangeCount('-', 'reps', i)">-</button>
                  <button (click)="onChangeCount('+', 'reps', i)">+</button>
                </label>
                <!-- Weight? -->
                <label *ngIf="sessionItem.weight">
                  Weight
                  <input min="0" step="5" type="number" formControlName="weight" [value]="sessionItem.weight">
                  <button (click)="onChangeCount('-', 'weight', i)">-</button>
                  <button (click)="onChangeCount('+', 'weight', i)">+</button>
                </label>
              </div>
            </section>
          </main>
          <aside>
          <!-- RPE -->
          <label>
            RPE
            <input formControlName="rpe" min="0" max="10" [value]="8" type="number">
            <button (click)="onChangeCount('-', 'rpe')">-</button>
            <button (click)="onChangeCount('+', 'rpe')">+</button>
          </label>
          <!-- Notes -->
          <mat-form-field>
            <mat-label>
              Notes
            </mat-label>
            <textarea formControlName="notes" matInput cols="30" rows="1"></textarea>
          </mat-form-field>
          </aside>
        </form>
      </mat-card-content>
      <mat-card-actions *ngrxLet="pages$ as pages">
        <button [disabled]="pages.isFirst" [routerLink]="['../', pages.previousId]" mat-button>
          previous
        </button>
        <button [disabled]="pages.isLast" [routerLink]="['../', pages.nextId]" mat-button>
          next
        </button>
        <button mat-button>save session</button>
      </mat-card-actions>
    </mat-card>
  </ng-container>
</ng-container>
<ng-template #loadingSessionItems>
  Loading Session Items...
</ng-template>
