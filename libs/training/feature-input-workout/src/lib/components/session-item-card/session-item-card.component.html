<mat-card class="card">
  <mat-card-content>
    <form [formGroup]="form" *ngIf="form">
      <main class="sets" formArrayName="sets">
        <header class="sets__header">
          <h4>Sets <span *ngIf="data.sessionItem.leftRight"> (L/R)</span></h4>
        </header>
        <section class="sets__container">
          <div
            *ngFor="
              let set of arrayOfCount(data.sessionItem.sets);
              let i = index
            "
            [formGroupName]="i"
            class="sets__individual"
          >
            <!-- Set #? -->
            <label class="sets__label">
              {{ i + 1 }}
            </label>
            <!-- Reps? -->
            <label class="sets__label">
              <input
                (focus)="onRepsFocus(i)"
                (blur)="onRepsBlur(i)"
                min="0"
                type="number"
                inputmode="numeric"
                formControlName="reps"
                class="sets__input"
              />
            </label>
            <!-- Weight? -->
            <label class="sets__weight" *ngIf="data.sessionItem.weight">
              <span>{{ data.sessionItem.weightUnit }}</span>
              <input
                min="0"
                step="5"
                type="number"
                inputmode="numeric"
                formControlName="weight"
                class="sets__input"
              />
            </label>
          </div>
        </section>
        <footer class="sets__footer">
          <h5>
            <span *ngIf="data.sessionItem.AMRAP; else goalReps"
              >Goal: AMRAP</span
            >
            <ng-template #goalReps
              ><span>Goal: {{ data.sessionItem.reps }} Reps</span></ng-template
            >
            <span *ngIf="data.sessionItem.intensity"
              >, {{ data.sessionItem.intensity }}</span
            >
            <span *ngIf="data.sessionItem.weight"
              >, {{ data.sessionItem.weight }}
              {{ data.sessionItem.weightUnit }}</span
            >
            <span *ngIf="data.sessionItem.tempo"
              >, {{ data.sessionItem.tempo }}</span
            >
          </h5>
        </footer>
      </main>
      <aside class="session-item">
        <header class="session-item__header"><h4>RPE</h4></header>
        <!-- RPE -->
        <label>
          <input
            (blur)="onRpeBlur()"
            (focus)="onRpeFocus()"
            formControlName="rpe"
            min="0"
            max="10"
            type="number"
            inputmode="numeric"
          />
        </label>
        <!-- Notes -->
        <mat-form-field class="session-item__notes">
          <mat-label>
            Notes
          </mat-label>
          <textarea formControlName="notes" matInput></textarea>
        </mat-form-field>
      </aside>
    </form>
  </mat-card-content>
</mat-card>
